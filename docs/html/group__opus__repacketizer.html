<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>micromouse: Repacketizer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">micromouse
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__opus__repacketizer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Repacketizer</div></div>
</div><!--header-->
<div class="contents">

<p>The repacketizer can be used to merge multiple Opus packets into a single packet or alternatively to split Opus packets that have previously been merged.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga1f85070a64bcbf5bf24f5ccb80323e7b" id="r_ga1f85070a64bcbf5bf24f5ccb80323e7b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a></td></tr>
<tr class="separator:ga1f85070a64bcbf5bf24f5ccb80323e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga833b745bf92317e9ac26797a56eba6fd" id="r_ga833b745bf92317e9ac26797a56eba6fd"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga833b745bf92317e9ac26797a56eba6fd">opus_repacketizer_get_size</a> (<a class="el" href="libpng16_2png_8h.html#a05f08be336491be77cd4dfa98f747c69">void</a>)</td></tr>
<tr class="memdesc:ga833b745bf92317e9ac26797a56eba6fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the size of an <code>OpusRepacketizer</code> structure.  <br /></td></tr>
<tr class="separator:ga833b745bf92317e9ac26797a56eba6fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeeb213d63c578dfbed40f71649bba8a2" id="r_gaeeb213d63c578dfbed40f71649bba8a2"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2">opus_repacketizer_init</a> (<a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *rp) OPUS_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:gaeeb213d63c578dfbed40f71649bba8a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Re)initializes a previously allocated repacketizer state.  <br /></td></tr>
<tr class="separator:gaeeb213d63c578dfbed40f71649bba8a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9edd109952b50005347e9a5c6ad10347" id="r_ga9edd109952b50005347e9a5c6ad10347"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347">opus_repacketizer_create</a> (<a class="el" href="libpng16_2png_8h.html#a05f08be336491be77cd4dfa98f747c69">void</a>)</td></tr>
<tr class="memdesc:ga9edd109952b50005347e9a5c6ad10347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates memory and initializes the new repacketizer with <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a>.  <br /></td></tr>
<tr class="separator:ga9edd109952b50005347e9a5c6ad10347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab03f22d1139a42e450761ad99ca3d882" id="r_gab03f22d1139a42e450761ad99ca3d882"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="libpng16_2png_8h.html#a05f08be336491be77cd4dfa98f747c69">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#gab03f22d1139a42e450761ad99ca3d882">opus_repacketizer_destroy</a> (<a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *rp)</td></tr>
<tr class="memdesc:gab03f22d1139a42e450761ad99ca3d882"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees an <code>OpusRepacketizer</code> allocated by <a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create()</a>.  <br /></td></tr>
<tr class="separator:gab03f22d1139a42e450761ad99ca3d882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa739f0bbc0ad09ad159ffb6455a6bb55" id="r_gaa739f0bbc0ad09ad159ffb6455a6bb55"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55">opus_repacketizer_cat</a> (<a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *rp, <a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned char *<a class="el" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> len) OPUS_ARG_NONNULL(1) OPUS_ARG_NONNULL(2)</td></tr>
<tr class="memdesc:gaa739f0bbc0ad09ad159ffb6455a6bb55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a packet to the current repacketizer state.  <br /></td></tr>
<tr class="separator:gaa739f0bbc0ad09ad159ffb6455a6bb55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad06762a8f4032823f6b64b63e8416efc" id="r_gad06762a8f4032823f6b64b63e8416efc"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc">opus_repacketizer_out_range</a> (<a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *rp, int begin, int end, unsigned char *<a class="el" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> maxlen) OPUS_ARG_NONNULL(1) OPUS_ARG_NONNULL(4)</td></tr>
<tr class="memdesc:gad06762a8f4032823f6b64b63e8416efc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new packet from data previously submitted to the repacketizer state via <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a>.  <br /></td></tr>
<tr class="separator:gad06762a8f4032823f6b64b63e8416efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0abed93ad18e8b2bd8b5bd10189c3e97" id="r_ga0abed93ad18e8b2bd8b5bd10189c3e97"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga0abed93ad18e8b2bd8b5bd10189c3e97">opus_repacketizer_get_nb_frames</a> (<a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *rp) OPUS_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga0abed93ad18e8b2bd8b5bd10189c3e97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the total number of frames contained in packet data submitted to the repacketizer state so far via <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a> since the last call to <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a> or <a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create()</a>.  <br /></td></tr>
<tr class="separator:ga0abed93ad18e8b2bd8b5bd10189c3e97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa1b5f68279829dcbaf31d374b2f3eac4" id="r_gaa1b5f68279829dcbaf31d374b2f3eac4"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4">opus_repacketizer_out</a> (<a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *rp, unsigned char *<a class="el" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> maxlen) OPUS_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:gaa1b5f68279829dcbaf31d374b2f3eac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new packet from data previously submitted to the repacketizer state via <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a>.  <br /></td></tr>
<tr class="separator:gaa1b5f68279829dcbaf31d374b2f3eac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga902a178e79f5b49721c8fb3a5f7d1e5b" id="r_ga902a178e79f5b49721c8fb3a5f7d1e5b"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga902a178e79f5b49721c8fb3a5f7d1e5b">opus_packet_pad</a> (unsigned char *<a class="el" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> len, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> new_len)</td></tr>
<tr class="memdesc:ga902a178e79f5b49721c8fb3a5f7d1e5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pads a given Opus packet to a larger size (possibly changing the TOC sequence).  <br /></td></tr>
<tr class="separator:ga902a178e79f5b49721c8fb3a5f7d1e5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87aaad8db1ec8a4b634415e7b3a84835" id="r_ga87aaad8db1ec8a4b634415e7b3a84835"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga87aaad8db1ec8a4b634415e7b3a84835">opus_packet_unpad</a> (unsigned char *<a class="el" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> len)</td></tr>
<tr class="memdesc:ga87aaad8db1ec8a4b634415e7b3a84835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all padding from a given Opus packet and rewrite the TOC sequence to minimize space usage.  <br /></td></tr>
<tr class="separator:ga87aaad8db1ec8a4b634415e7b3a84835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00e20e143f8edf570710036fa07941cb" id="r_ga00e20e143f8edf570710036fa07941cb"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga00e20e143f8edf570710036fa07941cb">opus_multistream_packet_pad</a> (unsigned char *<a class="el" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> len, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> new_len, int nb_streams)</td></tr>
<tr class="memdesc:ga00e20e143f8edf570710036fa07941cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pads a given Opus multi-stream packet to a larger size (possibly changing the TOC sequence).  <br /></td></tr>
<tr class="separator:ga00e20e143f8edf570710036fa07941cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga37cb0efda17994e2d9ab7d31d013276e" id="r_ga37cb0efda17994e2d9ab7d31d013276e"><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__opus__repacketizer.html#ga37cb0efda17994e2d9ab7d31d013276e">opus_multistream_packet_unpad</a> (unsigned char *<a class="el" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> len, int nb_streams)</td></tr>
<tr class="memdesc:ga37cb0efda17994e2d9ab7d31d013276e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all padding from a given Opus multi-stream packet and rewrite the TOC sequence to minimize space usage.  <br /></td></tr>
<tr class="separator:ga37cb0efda17994e2d9ab7d31d013276e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The repacketizer can be used to merge multiple Opus packets into a single packet or alternatively to split Opus packets that have previously been merged. </p>
<p>Splitting valid Opus packets is always guaranteed to succeed, whereas merging valid packets only succeeds if all frames have the same mode, bandwidth, and frame size, and when the total duration of the merged packet is no more than 120 ms. The 120 ms limit comes from the specification and limits decoder memory requirements at a point where framing overhead becomes negligible.</p>
<p>The repacketizer currently only operates on elementary Opus streams. It will not manipualte multistream packets successfully, except in the degenerate case where they consist of data from a single stream.</p>
<p>The repacketizing process starts with creating a repacketizer state, either by calling <a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create()</a> or by allocating the memory yourself, e.g., </p><div class="fragment"><div class="line"><a class="code hl_typedef" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *rp;</div>
<div class="line">rp = (<a class="code hl_typedef" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a>*)malloc(<a class="code hl_function" href="group__opus__repacketizer.html#ga833b745bf92317e9ac26797a56eba6fd">opus_repacketizer_get_size</a>());</div>
<div class="line"><span class="keywordflow">if</span> (rp != NULL)</div>
<div class="line">    <a class="code hl_function" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2">opus_repacketizer_init</a>(rp);</div>
<div class="ttc" id="agroup__opus__repacketizer_html_ga1f85070a64bcbf5bf24f5ccb80323e7b"><div class="ttname"><a href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a></div><div class="ttdeci">struct OpusRepacketizer OpusRepacketizer</div><div class="ttdef"><b>Definition</b> opus.h:754</div></div>
<div class="ttc" id="agroup__opus__repacketizer_html_ga833b745bf92317e9ac26797a56eba6fd"><div class="ttname"><a href="group__opus__repacketizer.html#ga833b745bf92317e9ac26797a56eba6fd">opus_repacketizer_get_size</a></div><div class="ttdeci">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int opus_repacketizer_get_size(void)</div><div class="ttdoc">Gets the size of an OpusRepacketizer structure.</div></div>
<div class="ttc" id="agroup__opus__repacketizer_html_gaeeb213d63c578dfbed40f71649bba8a2"><div class="ttname"><a href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2">opus_repacketizer_init</a></div><div class="ttdeci">OPUS_EXPORT OpusRepacketizer * opus_repacketizer_init(OpusRepacketizer *rp) OPUS_ARG_NONNULL(1)</div><div class="ttdoc">(Re)initializes a previously allocated repacketizer state.</div></div>
</div><!-- fragment --><p>Then the application should submit packets with <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a>, extract new packets with <a class="el" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out()</a> or <a class="el" href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out_range()</a>, and then reset the state for the next set of input packets via <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a>.</p>
<p>For example, to split a sequence of packets into individual frames: </p><div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>;</div>
<div class="line"><span class="keywordtype">int</span> len;</div>
<div class="line"><span class="keywordflow">while</span> (get_next_packet(&amp;<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, &amp;len))</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> out[1276];</div>
<div class="line">  <a class="code hl_typedef" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> out_len;</div>
<div class="line">  <span class="keywordtype">int</span> nb_frames;</div>
<div class="line">  <span class="keywordtype">int</span> err;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  err = <a class="code hl_function" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55">opus_repacketizer_cat</a>(rp, <a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, len);</div>
<div class="line">  <span class="keywordflow">if</span> (err != <a class="code hl_define" href="group__opus__errorcodes.html#gaa44cf8a185e1b5cb940ef63eb4f02d21">OPUS_OK</a>)</div>
<div class="line">  {</div>
<div class="line">    release_packet(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>);</div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">  }</div>
<div class="line">  nb_frames = <a class="code hl_function" href="group__opus__repacketizer.html#ga0abed93ad18e8b2bd8b5bd10189c3e97">opus_repacketizer_get_nb_frames</a>(rp);</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; nb_frames; i++)</div>
<div class="line">  {</div>
<div class="line">    out_len = <a class="code hl_function" href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc">opus_repacketizer_out_range</a>(rp, i, i+1, out, <span class="keyword">sizeof</span>(out));</div>
<div class="line">    <span class="keywordflow">if</span> (out_len &lt; 0)</div>
<div class="line">    {</div>
<div class="line">       release_packet(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>);</div>
<div class="line">       <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)out_len;</div>
<div class="line">    }</div>
<div class="line">    output_next_packet(out, out_len);</div>
<div class="line">  }</div>
<div class="line">  <a class="code hl_function" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2">opus_repacketizer_init</a>(rp);</div>
<div class="line">  release_packet(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__opus__errorcodes_html_gaa44cf8a185e1b5cb940ef63eb4f02d21"><div class="ttname"><a href="group__opus__errorcodes.html#gaa44cf8a185e1b5cb940ef63eb4f02d21">OPUS_OK</a></div><div class="ttdeci">#define OPUS_OK</div><div class="ttdoc">No error.</div><div class="ttdef"><b>Definition</b> opus_defines.h:46</div></div>
<div class="ttc" id="agroup__opus__repacketizer_html_ga0abed93ad18e8b2bd8b5bd10189c3e97"><div class="ttname"><a href="group__opus__repacketizer.html#ga0abed93ad18e8b2bd8b5bd10189c3e97">opus_repacketizer_get_nb_frames</a></div><div class="ttdeci">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int opus_repacketizer_get_nb_frames(OpusRepacketizer *rp) OPUS_ARG_NONNULL(1)</div><div class="ttdoc">Return the total number of frames contained in packet data submitted to the repacketizer state so far...</div></div>
<div class="ttc" id="agroup__opus__repacketizer_html_gaa739f0bbc0ad09ad159ffb6455a6bb55"><div class="ttname"><a href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55">opus_repacketizer_cat</a></div><div class="ttdeci">OPUS_EXPORT int opus_repacketizer_cat(OpusRepacketizer *rp, const unsigned char *data, opus_int32 len) OPUS_ARG_NONNULL(1) OPUS_ARG_NONNULL(2)</div><div class="ttdoc">Add a packet to the current repacketizer state.</div></div>
<div class="ttc" id="agroup__opus__repacketizer_html_gad06762a8f4032823f6b64b63e8416efc"><div class="ttname"><a href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc">opus_repacketizer_out_range</a></div><div class="ttdeci">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT opus_int32 opus_repacketizer_out_range(OpusRepacketizer *rp, int begin, int end, unsigned char *data, opus_int32 maxlen) OPUS_ARG_NONNULL(1) OPUS_ARG_NONNULL(4)</div><div class="ttdoc">Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...</div></div>
<div class="ttc" id="ajpeglib_8h_html_aa379dc8ae39e55ae0c431a61a7d2f2bc"><div class="ttname"><a href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a></div><div class="ttdeci">JSAMPIMAGE data</div><div class="ttdef"><b>Definition</b> jpeglib.h:964</div></div>
<div class="ttc" id="aopus__types_8h_html_aa4d309d6f80b99dbabebc8f98879ab9a"><div class="ttname"><a href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a></div><div class="ttdeci">int opus_int32</div><div class="ttdef"><b>Definition</b> opus_types.h:161</div></div>
</div><!-- fragment --><p>Alternatively, to combine a sequence of frames into packets that each contain up to <code>TARGET_DURATION_MS</code> milliseconds of data: </p><div class="fragment"><div class="line"><span class="comment">// The maximum number of packets with duration TARGET_DURATION_MS occurs</span></div>
<div class="line"><span class="comment">// when the frame size is 2.5 ms, for a total of (TARGET_DURATION_MS*2/5)</span></div>
<div class="line"><span class="comment">// packets.</span></div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[(TARGET_DURATION_MS*2/5)+1];</div>
<div class="line"><a class="code hl_typedef" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> len[(TARGET_DURATION_MS*2/5)+1];</div>
<div class="line"><span class="keywordtype">int</span> nb_packets;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> out[1277*(TARGET_DURATION_MS*2/2)];</div>
<div class="line"><a class="code hl_typedef" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> out_len;</div>
<div class="line"><span class="keywordtype">int</span> prev_toc;</div>
<div class="line">nb_packets = 0;</div>
<div class="line"><span class="keywordflow">while</span> (get_next_packet(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>+nb_packets, len+nb_packets))</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> nb_frames;</div>
<div class="line">  <span class="keywordtype">int</span> err;</div>
<div class="line">  nb_frames = <a class="code hl_function" href="group__opus__decoder.html#ga932edb5fbae85cf452650ef390f52849">opus_packet_get_nb_frames</a>(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[nb_packets], len[nb_packets]);</div>
<div class="line">  <span class="keywordflow">if</span> (nb_frames &lt; 1)</div>
<div class="line">  {</div>
<div class="line">    release_packets(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, nb_packets+1);</div>
<div class="line">    <span class="keywordflow">return</span> nb_frames;</div>
<div class="line">  }</div>
<div class="line">  nb_frames += <a class="code hl_function" href="group__opus__repacketizer.html#ga0abed93ad18e8b2bd8b5bd10189c3e97">opus_repacketizer_get_nb_frames</a>(rp);</div>
<div class="line">  <span class="comment">// If adding the next packet would exceed our target, or it has an</span></div>
<div class="line">  <span class="comment">// incompatible TOC sequence, output the packets we already have before</span></div>
<div class="line">  <span class="comment">// submitting it.</span></div>
<div class="line">  <span class="comment">// N.B., The nb_packets &gt; 0 check ensures we&#39;ve submitted at least one</span></div>
<div class="line">  <span class="comment">// packet since the last call to opus_repacketizer_init(). Otherwise a</span></div>
<div class="line">  <span class="comment">// single packet longer than TARGET_DURATION_MS would cause us to try to</span></div>
<div class="line">  <span class="comment">// output an (invalid) empty packet. It also ensures that prev_toc has</span></div>
<div class="line">  <span class="comment">// been set to a valid value. Additionally, len[nb_packets] &gt; 0 is</span></div>
<div class="line">  <span class="comment">// guaranteed by the call to opus_packet_get_nb_frames() above, so the</span></div>
<div class="line">  <span class="comment">// reference to data[nb_packets][0] should be valid.</span></div>
<div class="line">  <span class="keywordflow">if</span> (nb_packets &gt; 0 &amp;&amp; (</div>
<div class="line">      ((prev_toc &amp; 0xFC) != (<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[nb_packets][0] &amp; 0xFC)) ||</div>
<div class="line">      <a class="code hl_function" href="group__opus__decoder.html#ga885564fa670e308100dfda89d3cdea10">opus_packet_get_samples_per_frame</a>(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[nb_packets], 48000)*nb_frames &gt;</div>
<div class="line">      TARGET_DURATION_MS*48))</div>
<div class="line">  {</div>
<div class="line">    out_len = <a class="code hl_function" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4">opus_repacketizer_out</a>(rp, out, <span class="keyword">sizeof</span>(out));</div>
<div class="line">    <span class="keywordflow">if</span> (out_len &lt; 0)</div>
<div class="line">    {</div>
<div class="line">       release_packets(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, nb_packets+1);</div>
<div class="line">       <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)out_len;</div>
<div class="line">    }</div>
<div class="line">    output_next_packet(out, out_len);</div>
<div class="line">    <a class="code hl_function" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2">opus_repacketizer_init</a>(rp);</div>
<div class="line">    release_packets(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, nb_packets);</div>
<div class="line">    <a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[0] = <a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[nb_packets];</div>
<div class="line">    len[0] = len[nb_packets];</div>
<div class="line">    nb_packets = 0;</div>
<div class="line">  }</div>
<div class="line">  err = <a class="code hl_function" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55">opus_repacketizer_cat</a>(rp, <a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[nb_packets], len[nb_packets]);</div>
<div class="line">  <span class="keywordflow">if</span> (err != <a class="code hl_define" href="group__opus__errorcodes.html#gaa44cf8a185e1b5cb940ef63eb4f02d21">OPUS_OK</a>)</div>
<div class="line">  {</div>
<div class="line">    release_packets(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, nb_packets+1);</div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">  }</div>
<div class="line">  prev_toc = <a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>[nb_packets][0];</div>
<div class="line">  nb_packets++;</div>
<div class="line">}</div>
<div class="line"><span class="comment">// Output the final, partial packet.</span></div>
<div class="line"><span class="keywordflow">if</span> (nb_packets &gt; 0)</div>
<div class="line">{</div>
<div class="line">  out_len = <a class="code hl_function" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4">opus_repacketizer_out</a>(rp, out, <span class="keyword">sizeof</span>(out));</div>
<div class="line">  release_packets(<a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, nb_packets);</div>
<div class="line">  <span class="keywordflow">if</span> (out_len &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)out_len;</div>
<div class="line">  output_next_packet(out, out_len);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__opus__decoder_html_ga885564fa670e308100dfda89d3cdea10"><div class="ttname"><a href="group__opus__decoder.html#ga885564fa670e308100dfda89d3cdea10">opus_packet_get_samples_per_frame</a></div><div class="ttdeci">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int opus_packet_get_samples_per_frame(const unsigned char *data, opus_int32 Fs) OPUS_ARG_NONNULL(1)</div><div class="ttdoc">Gets the number of samples per frame from an Opus packet.</div></div>
<div class="ttc" id="agroup__opus__decoder_html_ga932edb5fbae85cf452650ef390f52849"><div class="ttname"><a href="group__opus__decoder.html#ga932edb5fbae85cf452650ef390f52849">opus_packet_get_nb_frames</a></div><div class="ttdeci">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int opus_packet_get_nb_frames(const unsigned char packet[], opus_int32 len) OPUS_ARG_NONNULL(1)</div><div class="ttdoc">Gets the number of frames in an Opus packet.</div></div>
<div class="ttc" id="agroup__opus__repacketizer_html_gaa1b5f68279829dcbaf31d374b2f3eac4"><div class="ttname"><a href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4">opus_repacketizer_out</a></div><div class="ttdeci">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT opus_int32 opus_repacketizer_out(OpusRepacketizer *rp, unsigned char *data, opus_int32 maxlen) OPUS_ARG_NONNULL(1)</div><div class="ttdoc">Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...</div></div>
</div><!-- fragment --><p>An alternate way of merging packets is to simply call <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a> unconditionally until it fails. At that point, the merged packet can be obtained with <a class="el" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out()</a> and the input packet for which <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a> needs to be re-added to a newly reinitialized repacketizer state. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga1f85070a64bcbf5bf24f5ccb80323e7b" name="ga1f85070a64bcbf5bf24f5ccb80323e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1f85070a64bcbf5bf24f5ccb80323e7b">&#9670;&#160;</a></span>OpusRepacketizer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> <a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga00e20e143f8edf570710036fa07941cb" name="ga00e20e143f8edf570710036fa07941cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga00e20e143f8edf570710036fa07941cb">&#9670;&#160;</a></span>opus_multistream_packet_pad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT int opus_multistream_packet_pad </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>new_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nb_streams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pads a given Opus multi-stream packet to a larger size (possibly changing the TOC sequence). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td><code>const unsigned char*</code>: The buffer containing the packet to pad. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">len</td><td><code>opus_int32</code>: The size of the packet. This must be at least 1. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">new_len</td><td><code>opus_int32</code>: The desired size of the packet after padding. This must be at least 1. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">nb_streams</td><td><code>opus_int32</code>: The number of streams (not channels) in the packet. This must be at least as large as len. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaa44cf8a185e1b5cb940ef63eb4f02d21" title="No error.">OPUS_OK</a></td><td><em>on</em> success. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaf2d43e479455a1a3b6874e5faf4e827d" title="One or more invalid/out of range arguments.">OPUS_BAD_ARG</a></td><td><em>len</em> was less than 1. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#ga46fc9dd493fb8e291bd8e838f0988bb7" title="The compressed data passed is corrupted.">OPUS_INVALID_PACKET</a></td><td><em>data</em> did not contain a valid Opus packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga37cb0efda17994e2d9ab7d31d013276e" name="ga37cb0efda17994e2d9ab7d31d013276e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga37cb0efda17994e2d9ab7d31d013276e">&#9670;&#160;</a></span>opus_multistream_packet_unpad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> opus_multistream_packet_unpad </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nb_streams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove all padding from a given Opus multi-stream packet and rewrite the TOC sequence to minimize space usage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td><code>const unsigned char*</code>: The buffer containing the packet to strip. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">len</td><td><code>opus_int32</code>: The size of the packet. This must be at least 1. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">nb_streams</td><td><code>opus_int32</code>: The number of streams (not channels) in the packet. This must be at least 1. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new size of the output packet on success, or an error code on failure. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaf2d43e479455a1a3b6874e5faf4e827d" title="One or more invalid/out of range arguments.">OPUS_BAD_ARG</a></td><td><em>len</em> was less than 1 or new_len was less than len. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#ga46fc9dd493fb8e291bd8e838f0988bb7" title="The compressed data passed is corrupted.">OPUS_INVALID_PACKET</a></td><td><em>data</em> did not contain a valid Opus packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga902a178e79f5b49721c8fb3a5f7d1e5b" name="ga902a178e79f5b49721c8fb3a5f7d1e5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga902a178e79f5b49721c8fb3a5f7d1e5b">&#9670;&#160;</a></span>opus_packet_pad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT int opus_packet_pad </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>new_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pads a given Opus packet to a larger size (possibly changing the TOC sequence). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td><code>const unsigned char*</code>: The buffer containing the packet to pad. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">len</td><td><code>opus_int32</code>: The size of the packet. This must be at least 1. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">new_len</td><td><code>opus_int32</code>: The desired size of the packet after padding. This must be at least as large as len. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaa44cf8a185e1b5cb940ef63eb4f02d21" title="No error.">OPUS_OK</a></td><td><em>on</em> success. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaf2d43e479455a1a3b6874e5faf4e827d" title="One or more invalid/out of range arguments.">OPUS_BAD_ARG</a></td><td><em>len</em> was less than 1 or new_len was less than len. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#ga46fc9dd493fb8e291bd8e838f0988bb7" title="The compressed data passed is corrupted.">OPUS_INVALID_PACKET</a></td><td><em>data</em> did not contain a valid Opus packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga87aaad8db1ec8a4b634415e7b3a84835" name="ga87aaad8db1ec8a4b634415e7b3a84835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87aaad8db1ec8a4b634415e7b3a84835">&#9670;&#160;</a></span>opus_packet_unpad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> opus_packet_unpad </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove all padding from a given Opus packet and rewrite the TOC sequence to minimize space usage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td><code>const unsigned char*</code>: The buffer containing the packet to strip. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">len</td><td><code>opus_int32</code>: The size of the packet. This must be at least 1. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new size of the output packet on success, or an error code on failure. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaf2d43e479455a1a3b6874e5faf4e827d" title="One or more invalid/out of range arguments.">OPUS_BAD_ARG</a></td><td><em>len</em> was less than 1. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#ga46fc9dd493fb8e291bd8e838f0988bb7" title="The compressed data passed is corrupted.">OPUS_INVALID_PACKET</a></td><td><em>data</em> did not contain a valid Opus packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaa739f0bbc0ad09ad159ffb6455a6bb55" name="gaa739f0bbc0ad09ad159ffb6455a6bb55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa739f0bbc0ad09ad159ffb6455a6bb55">&#9670;&#160;</a></span>opus_repacketizer_cat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT int opus_repacketizer_cat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td>
          <td class="paramname"><em>rp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a packet to the current repacketizer state. </p>
<p>This packet must match the configuration of any packets already submitted for repacketization since the last call to <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a>. This means that it must have the same coding mode, audio bandwidth, frame size, and channel count. This can be checked in advance by examining the top 6 bits of the first byte of the packet, and ensuring they match the top 6 bits of the first byte of any previously submitted packet. The total duration of audio in the repacketizer state also must not exceed 120 ms, the maximum duration of a single packet, after adding this packet.</p>
<p>The contents of the current repacketizer state can be extracted into new packets using <a class="el" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out()</a> or <a class="el" href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out_range()</a>.</p>
<p>In order to add a packet with a different configuration or to add more audio beyond 120 ms, you must clear the repacketizer state by calling <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a>. If a packet is too large to add to the current repacketizer state, no part of it is added, even if it contains multiple frames, some of which might fit. If you wish to be able to add parts of such packets, you should first use another repacketizer to split the packet into pieces and add them individually. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out_range</a> </dd>
<dd>
<a class="el" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out</a> </dd>
<dd>
<a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">rp</td><td><code>OpusRepacketizer*</code>: The repacketizer state to which to add the packet. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td><code>const unsigned char*</code>: The packet data. The application must ensure this pointer remains valid until the next call to <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a> or <a class="el" href="group__opus__repacketizer.html#gab03f22d1139a42e450761ad99ca3d882" title="Frees an OpusRepacketizer allocated by opus_repacketizer_create().">opus_repacketizer_destroy()</a>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">len</td><td><code>opus_int32</code>: The number of bytes in the packet data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error code indicating whether or not the operation succeeded. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaa44cf8a185e1b5cb940ef63eb4f02d21" title="No error.">OPUS_OK</a></td><td>The packet's contents have been added to the repacketizer state. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#ga46fc9dd493fb8e291bd8e838f0988bb7" title="The compressed data passed is corrupted.">OPUS_INVALID_PACKET</a></td><td>The packet did not have a valid TOC sequence, the packet's TOC sequence was not compatible with previously submitted packets (because the coding mode, audio bandwidth, frame size, or channel count did not match), or adding this packet would increase the total amount of audio stored in the repacketizer state to more than 120 ms. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9edd109952b50005347e9a5c6ad10347" name="ga9edd109952b50005347e9a5c6ad10347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9edd109952b50005347e9a5c6ad10347">&#9670;&#160;</a></span>opus_repacketizer_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> * opus_repacketizer_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libpng16_2png_8h.html#a05f08be336491be77cd4dfa98f747c69">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates memory and initializes the new repacketizer with <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a>. </p>

</div>
</div>
<a id="gab03f22d1139a42e450761ad99ca3d882" name="gab03f22d1139a42e450761ad99ca3d882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab03f22d1139a42e450761ad99ca3d882">&#9670;&#160;</a></span>opus_repacketizer_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="libpng16_2png_8h.html#a05f08be336491be77cd4dfa98f747c69">void</a> opus_repacketizer_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td>
          <td class="paramname"><em>rp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees an <code>OpusRepacketizer</code> allocated by <a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rp</td><td><code>OpusRepacketizer*</code>: State to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0abed93ad18e8b2bd8b5bd10189c3e97" name="ga0abed93ad18e8b2bd8b5bd10189c3e97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0abed93ad18e8b2bd8b5bd10189c3e97">&#9670;&#160;</a></span>opus_repacketizer_get_nb_frames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int opus_repacketizer_get_nb_frames </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td>
          <td class="paramname"><em>rp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the total number of frames contained in packet data submitted to the repacketizer state so far via <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a> since the last call to <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a> or <a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create()</a>. </p>
<p>This defines the valid range of packets that can be extracted with <a class="el" href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out_range()</a> or <a class="el" href="group__opus__repacketizer.html#gaa1b5f68279829dcbaf31d374b2f3eac4" title="Construct a new packet from data previously submitted to the repacketizer state via opus_repacketizer...">opus_repacketizer_out()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rp</td><td><code>OpusRepacketizer*</code>: The repacketizer state containing the frames. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total number of frames contained in the packet data submitted to the repacketizer state. </dd></dl>

</div>
</div>
<a id="ga833b745bf92317e9ac26797a56eba6fd" name="ga833b745bf92317e9ac26797a56eba6fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga833b745bf92317e9ac26797a56eba6fd">&#9670;&#160;</a></span>opus_repacketizer_get_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT int opus_repacketizer_get_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libpng16_2png_8h.html#a05f08be336491be77cd4dfa98f747c69">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the size of an <code>OpusRepacketizer</code> structure. </p>
<dl class="section return"><dt>Returns</dt><dd>The size in bytes. </dd></dl>

</div>
</div>
<a id="gaeeb213d63c578dfbed40f71649bba8a2" name="gaeeb213d63c578dfbed40f71649bba8a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeeb213d63c578dfbed40f71649bba8a2">&#9670;&#160;</a></span>opus_repacketizer_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> * opus_repacketizer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td>
          <td class="paramname"><em>rp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(Re)initializes a previously allocated repacketizer state. </p>
<p>The state must be at least the size returned by <a class="el" href="group__opus__repacketizer.html#ga833b745bf92317e9ac26797a56eba6fd" title="Gets the size of an OpusRepacketizer structure.">opus_repacketizer_get_size()</a>. This can be used for applications which use their own allocator instead of malloc(). It must also be called to reset the queue of packets waiting to be repacketized, which is necessary if the maximum packet duration of 120 ms is reached or if you wish to submit packets with a different Opus configuration (coding mode, audio bandwidth, frame size, or channel count). Failure to do so will prevent a new packet from being added with <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create</a> </dd>
<dd>
<a class="el" href="group__opus__repacketizer.html#ga833b745bf92317e9ac26797a56eba6fd" title="Gets the size of an OpusRepacketizer structure.">opus_repacketizer_get_size</a> </dd>
<dd>
<a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rp</td><td><code>OpusRepacketizer*</code>: The repacketizer state to (re)initialize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the same repacketizer state that was passed in. </dd></dl>

</div>
</div>
<a id="gaa1b5f68279829dcbaf31d374b2f3eac4" name="gaa1b5f68279829dcbaf31d374b2f3eac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa1b5f68279829dcbaf31d374b2f3eac4">&#9670;&#160;</a></span>opus_repacketizer_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> opus_repacketizer_out </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td>
          <td class="paramname"><em>rp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>maxlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new packet from data previously submitted to the repacketizer state via <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a>. </p>
<p>This is a convenience routine that returns all the data submitted so far in a single packet. It is equivalent to calling </p><div class="fragment"><div class="line"><a class="code hl_function" href="group__opus__repacketizer.html#gad06762a8f4032823f6b64b63e8416efc">opus_repacketizer_out_range</a>(rp, 0, <a class="code hl_function" href="group__opus__repacketizer.html#ga0abed93ad18e8b2bd8b5bd10189c3e97">opus_repacketizer_get_nb_frames</a>(rp),</div>
<div class="line">                            <a class="code hl_variable" href="jpeglib_8h.html#aa379dc8ae39e55ae0c431a61a7d2f2bc">data</a>, maxlen)</div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">rp</td><td><code>OpusRepacketizer*</code>: The repacketizer state from which to construct the new packet. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td><code>const unsigned char*</code>: The buffer in which to store the output packet. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">maxlen</td><td><code>opus_int32</code>: The maximum number of bytes to store in the output buffer. In order to guarantee success, this should be at least <code>1277*opus_repacketizer_get_nb_frames(rp)</code>. However, <code>1*opus_repacketizer_get_nb_frames(rp)</code> plus the size of all packet data submitted to the repacketizer since the last call to <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a> or <a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create()</a> is also sufficient, and possibly much smaller. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total size of the output packet on success, or an error code on failure. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gacd897c05563ec04a67d8e92ba29f3d4f" title="Not enough bytes allocated in the buffer.">OPUS_BUFFER_TOO_SMALL</a></td><td><em>maxlen</em> was insufficient to contain the complete output packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad06762a8f4032823f6b64b63e8416efc" name="gad06762a8f4032823f6b64b63e8416efc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad06762a8f4032823f6b64b63e8416efc">&#9670;&#160;</a></span>opus_repacketizer_out_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT OPUS_WARN_UNUSED_RESULT <a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> opus_repacketizer_out_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__opus__repacketizer.html#ga1f85070a64bcbf5bf24f5ccb80323e7b">OpusRepacketizer</a> *&#160;</td>
          <td class="paramname"><em>rp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>maxlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new packet from data previously submitted to the repacketizer state via <a class="el" href="group__opus__repacketizer.html#gaa739f0bbc0ad09ad159ffb6455a6bb55" title="Add a packet to the current repacketizer state.">opus_repacketizer_cat()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">rp</td><td><code>OpusRepacketizer*</code>: The repacketizer state from which to construct the new packet. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">begin</td><td><code>int</code>: The index of the first frame in the current repacketizer state to include in the output. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">end</td><td><code>int</code>: One past the index of the last frame in the current repacketizer state to include in the output. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td><code>const unsigned char*</code>: The buffer in which to store the output packet. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">maxlen</td><td><code>opus_int32</code>: The maximum number of bytes to store in the output buffer. In order to guarantee success, this should be at least <code>1276</code> for a single frame, or for multiple frames, <code>1277*(end-begin)</code>. However, <code>1*(end-begin)</code> plus the size of all packet data submitted to the repacketizer since the last call to <a class="el" href="group__opus__repacketizer.html#gaeeb213d63c578dfbed40f71649bba8a2" title="(Re)initializes a previously allocated repacketizer state.">opus_repacketizer_init()</a> or <a class="el" href="group__opus__repacketizer.html#ga9edd109952b50005347e9a5c6ad10347" title="Allocates memory and initializes the new repacketizer with opus_repacketizer_init().">opus_repacketizer_create()</a> is also sufficient, and possibly much smaller. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total size of the output packet on success, or an error code on failure. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gaf2d43e479455a1a3b6874e5faf4e827d" title="One or more invalid/out of range arguments.">OPUS_BAD_ARG</a></td><td><code>[begin,end)</code> was an invalid range of frames (begin &lt; 0, begin &gt;= end, or end &gt; <a class="el" href="group__opus__repacketizer.html#ga0abed93ad18e8b2bd8b5bd10189c3e97" title="Return the total number of frames contained in packet data submitted to the repacketizer state so far...">opus_repacketizer_get_nb_frames()</a>). </td></tr>
    <tr><td class="paramname"><a class="el" href="group__opus__errorcodes.html#gacd897c05563ec04a67d8e92ba29f3d4f" title="Not enough bytes allocated in the buffer.">OPUS_BUFFER_TOO_SMALL</a></td><td><em>maxlen</em> was insufficient to contain the complete output packet. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
